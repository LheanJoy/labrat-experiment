<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <link rel="icon" href="images/favicon-32x32.png" type="image/png">
  <title>Game - Lab Rat Experiment</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Link to your CSS (adjust the path as needed) -->
  <link rel="stylesheet" href="styles.css">
  <style>
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
    }
    body {
      display: flex;
      flex-direction: column;
      font-family: Arial, sans-serif;
      background: url('images/homepage_background.png') no-repeat center center fixed;
      background-size: cover;
    }
    /* Entire main area wrapped in a linear gradient container */
    main.gradient-main {
      background: linear-gradient(to right, #8806CE, #d6b4fc);
      padding: 40px;
      border-radius: 8px;
      margin: 20px;
      color: #fff;
    }
    main.gradient-main h1,
    main.gradient-main h2,
    main.gradient-main p {
      color: #fff;
    }
    /* Spacing adjustments for headings and paragraphs */
    main.gradient-main h1 {
      margin-top: 20px;
      margin-bottom: 20px;
    }
    main.gradient-main h2 {
      margin-top: 30px;
      margin-bottom: 15px;
    }
    main.gradient-main p {
      margin-top: 15px;
      margin-bottom: 15px;
      line-height: 1.6;
    }
    main {
      flex: 1;
      padding: 20px;
    }
    footer {
      text-align: center;
      padding: 15px;
      color: #fff;
      background: linear-gradient(to right, #8806CE, #d6b4fc);
    }
    /* Modal styling */
    .modal {
      display: none; 
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0,0,0,0.1); 
    }
    .modal-content {
      background-color: #8806CE;
      margin: 15% auto;
      padding: 20px;
      border: 1px solid #7b1fa2;
      width: 80%;
      max-width: 400px;
      border-radius: 4px;
      text-align: center;
    }
    .modal button.btn {
      margin-top: 20px;
      border-color: #7b1fa2;
    }
    /* Navbar Styles */
    .main-nav {
      background: linear-gradient(to right, #8806CE, #d6b4fc);
      padding: 10px 0;
      position: relative;
    }
    .main-nav .logo a {
      text-decoration: none;
      color: #fff;
      font-size: 24px;
      font-weight: bold;
      margin-left: 20px;
      display: flex;
      align-items: center;
    }
    .main-nav .logo img {
      height: 40px;
      margin-right: 10px;
    }
    .nav-list {
      list-style: none;
      display: flex;
      justify-content: center;
      margin: 0;
      padding-right: 550px;
    }
    .nav-list li {
      margin: 0 20px;
    }
    .nav-list li a {
      color: #fff;
      text-decoration: none;
      font-size: 16px;
      text-transform: uppercase;
      transition: color 0.3s ease;
    }
    .nav-list li a:hover {
      color: #7b1fa2;
    }
    .nav-list li a.active{
      text-decoration: underline;
      color: #fff;
    }
    .account-nav {
      position: absolute;
      right: 20px;
      top: 20px;
    }
    .account-nav button {
      background: none;
      border: none;
      color: #fff;
      font-size: 16px;
      cursor: pointer;
    }
    .dropdown {
      display: none;
      position: absolute;
      right: 20px;
      top: 40px;
      background-color: #d6b4fc;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
      list-style: none;
      padding: 10px;
      margin: 0;
      min-width: 100px;
      z-index: 100;
    }
    .dropdown li {
      margin: 5px 0;
    }
    .dropdown li a {
      color: #7b1fa2;
      text-decoration: none;
    }
    /* Animation keyframes */
    @keyframes fadeInUp {
      0% {
        opacity: 0;
        transform: translateY(20px);
      }
      100% {
        opacity: 1;
        transform: translateY(0);
      }
    }
    /* Container for feature and mobile requirement items */
    .content-group {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      justify-content: center;
      margin-bottom: 20px;
    }
    /* Style for each feature and mobile requirement item */
    .feature-item,
    .mobile-requirement {
      text-align: center;
      flex: 1 1 200px;
      animation: fadeInUp 0.8s ease forwards;
      transition: transform 0.3s ease;
    }
    /* Staggered animation delays */
    .feature-item:nth-child(1),
    .mobile-requirement:nth-child(1) { animation-delay: 0.2s; }
    .feature-item:nth-child(2),
    .mobile-requirement:nth-child(2) { animation-delay: 0.4s; }
    .feature-item:nth-child(3),
    .mobile-requirement:nth-child(3) { animation-delay: 0.6s; }
    .mobile-requirement:nth-child(4) { animation-delay: 0.8s; }
    /* Feature images */
    .feature-item img {
      width: 450px;
      height: 250px;
      border-radius: 3px;
      object-fit: cover;
      margin-bottom: 10px;
      border: 2px solid #fff;
      transition: transform 0.3s ease;
    }
    /* Mobile requirement images */
    .mobile-requirement img {
      width: 200px;
      height: 200px;
      border-radius: 3px;
      object-fit: cover;
      margin-bottom: 10px;
      border: 2px solid #fff;
      transition: transform 0.3s ease;
    }
    /* Hover effects */
    .feature-item:hover,
    .mobile-requirement:hover {
      transform: translateY(-5px);
    }
    .feature-item:hover img,
    .mobile-requirement:hover img {
      transform: scale(1.1);
    }
    /* Centering the button */
    .button-container {
      text-align: center;
      margin-top: 30px;
    }
    .btn {
      display: inline-block;
      padding: 10px 20px;
      background-color: #fff;
      background: linear-gradient(to right, #8806CE, #d6b4fc);
      text-decoration: none;
      border-radius: 4px;
      transition: background-color 0.3s ease, transform 0.3s ease;
    }
    .btn:hover {
      background: linear-gradient(to right, #d6b4fc, #8806CE);
      transform: scale(1.05);
    }
    /* Responsive adjustments */
    @media (max-width: 768px) {
      .nav-list {
        padding-right: 20px;
        flex-direction: column;
        align-items: center;
      }
      main.gradient-main {
        padding: 20px;
        margin: 10px;
      }
      .content-group {
        flex-direction: column;
        padding: 0;
      }
      .feature-item,
      .mobile-requirement {
        flex: 1 1 auto;
        max-width: 300px;
        width: 100%;
      }
      .feature-item img {
        width: 120px;
        height: 120px;
      }
      .mobile-requirement img {
        width: 100px;
        height: 100px;
      }
    }
  </style>
</head>
<body>
  <!-- HEADER & NAVIGATION -->
  <header>
    <nav class="main-nav">
      <div class="logo">
        <a href="index.html">
          <img src="images/logo.png" alt="Lab Rat Experiment Logo">
          <span class="visually-hidden">Lab Rat Experiment</span>
        </a>
      </div>
      <ul class="nav-list">
        <li><a href="index.html">Home</a></li>
        <li><a href="about.html">About</a></li>
        <li><a href="game.html" class="active">Game</a></li>
        <li id="leaderboard-link" class="hidden"><a href="leaderboard.html">Leaderboard</a></li>
        <li><a href="contact.html">Contact Us</a></li>
      </ul>
      <div class="account-nav">
        <button id="account-button">Account ▼</button>
        <ul class="dropdown" id="account-dropdown">
          <li id="profile-link"><a href="profile.html">Profile</a></li>
          <li id="logout-link" class="hidden"><a href="#" id="logout-button">Logout</a></li>
          <li id="login-link"><a href="login.html">Login</a></li>
          <li id="signup-link"><a href="register.html">Sign Up</a></li>
        </ul>
      </div>
    </nav>
  </header>
  
  <!-- Main Content -->
  <main class="gradient-main">
    <section id="game-desc">
      <h1>Lab Rat Experiment: The Scientific Method Game</h1>
      <p>
        Step into an immersive laboratory where every puzzle is a step into a world of scientific discovery.
        Use genuine lab techniques to test hypotheses, experiment with real lab tasks, and unveil a mystery 
        that challenges your critical thinking.
      </p>
      <!-- Features Section -->
      <h2>Features</h2>
      <div class="content-group features-group">
        <div class="feature-item">
          <img src="images/tutorial.jpg" alt="Tutorial Mode">
          <h3>Tutorial Mode</h3>
          <p>Learn the game mechanics through guided experiments.</p>
        </div>
        <div class="feature-item">
          <img src="images/lab_tasks.jpg" alt="Realistic Lab Tasks">
          <h3>Realistic Lab Tasks</h3>
          <p>Perform genuine lab tasks with precision and skill.</p>
        </div>
      </div>
      <!-- Mobile Requirements Section -->
      <h2>Mobile Requirements</h2>
      <div class="content-group mobile-req-group">
        <div class="mobile-requirement">
          <img src="images/Android.png" alt="Supported OS">
          <h3>Supported OS</h3>
          <p>Android 7.0 / 10.0 and above.</p>
        </div>
        <div class="mobile-requirement">
          <img src="images/RAM.png" alt="RAM Requirement">
          <h3>RAM</h3>
          <p>Minimum 2GB required.</p>
        </div>
        <div class="mobile-requirement">
          <img src="images/Storage.png" alt="Storage Requirement">
          <h3>Storage</h3>
          <p>At least 500MB free space.</p>
        </div>
        <div class="mobile-requirement">
          <img src="images/Connectivity.png" alt="Internet Connection">
          <h3>Connectivity</h3>
          <p>Internet connection for updates.</p>
        </div>
      </div>
      <!-- Centered Button for Leaderboard, dynamically updated based on authentication -->
      <div class="button-container">
        <a href="login.html" class="btn" id="viewLeaderboardBtn">Login to View Leaderboard</a>
      </div>
    </section>
  </main>
  
  <footer>
    <p>&copy; 2025 Lab Rat Experiment. All rights reserved.</p>
  </footer>
  
  <!-- Client-Side Interactivity -->
  <script>
    // Account Dropdown Logic
    document.addEventListener("DOMContentLoaded", function(){
      var accountButton = document.getElementById("account-button");
      var accountDropdown = document.getElementById("account-dropdown");
      accountButton.addEventListener("click", function(e) {
        e.stopPropagation();
        accountDropdown.style.display = accountDropdown.style.display === "block" ? "none" : "block";
      });
      document.addEventListener("click", function() {
        accountDropdown.style.display = "none";
      });
    });
  </script>
  
  <!-- Firebase Integration for Authentication -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.17.1/firebase-app.js";
    import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/9.17.1/firebase-auth.js";

    const firebaseConfig = {
  apiKey: "AIzaSyB4nNmRWksPDQluiW2R1vi-RkWfPo9KUtI",
  authDomain: "lab-rat-experiment.firebaseapp.com",
  projectId: "lab-rat-experiment",
  storageBucket: "lab-rat-experiment.firebasestorage.app",
  messagingSenderId: "1005490252081",
  appId: "1:1005490252081:web:0b6ecb6f448f728f212810"
};

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    // Monitor authentication state
    onAuthStateChanged(auth, (user) => {
      if (user) {
        console.log("User signed in:", user);
        const username = user.displayName ? user.displayName : (user.email ? user.email.split('@')[0] : "User");
        document.getElementById("account-button").textContent = username + " ▼";

        // Display links for authenticated users
        document.getElementById("leaderboard-link").style.display = "block";
        document.getElementById("profile-link").style.display = "block";
        document.getElementById("logout-link").style.display = "block";
        // Hide non-authenticated links
        document.getElementById("login-link").style.display = "none";
        document.getElementById("signup-link").style.display = "none";

        // Update leaderboard button for authenticated user
        const viewLeaderboardBtn = document.getElementById("viewLeaderboardBtn");
        if (viewLeaderboardBtn) {
          viewLeaderboardBtn.href = "leaderboard.html";
          viewLeaderboardBtn.textContent = "View Leaderboard";
        }
      } else {
        // Hide authenticated user links
        document.getElementById("leaderboard-link").style.display = "none";
        document.getElementById("room-link").style.display = "none";
        document.getElementById("profile-link").style.display = "none";
        document.getElementById("logout-link").style.display = "none";
        // Show non-authenticated links
        document.getElementById("login-link").style.display = "block";
        document.getElementById("signup-link").style.display = "block";

        // Update leaderboard button for non-authenticated user
        const viewLeaderboardBtn = document.getElementById("viewLeaderboardBtn");
        if (viewLeaderboardBtn) {
          viewLeaderboardBtn.href = "login.html";
          viewLeaderboardBtn.textContent = "Login to View Leaderboard";
        }
      }
    });

    // Logout functionality
    const logoutButton = document.getElementById("logout-button");
    logoutButton.addEventListener("click", (e) => {
      e.preventDefault();
      signOut(auth)
        .then(() => {
          console.log("User signed out.");
        })
        .catch((error) => {
          console.error("Error signing out:", error);
        });
    });
  </script>
</body>
</html>
